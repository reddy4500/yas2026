<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <h2>Create a new account</h2>
        <form id="registerForm" autocomplete="off">
            <div class="card">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone"
                       pattern="[7-9]{1}[0-9]{9}"
                       title="Enter a valid 10-digit Indian phone number starting with 7, 8, or 9"
                       maxlength="10"
                       required>
                <label for="password">Password:</label>
                <input type="password" id="password" minlength="6" required>
                <button type="submit">Register</button>
            </div>
        </form>
        <p>Already registered? <a href="login.html">Login</a></p>
    </main>
    <script>
        document.getElementById('registerForm').onsubmit = function(e) {
            e.preventDefault();
            const phone = document.getElementById('phone').value.trim();
            const password = document.getElementById('password').value;
            const phoneRegex = /^[7-9][0-9]{9}$/;
            if (!phoneRegex.test(phone)) {
                alert('Invalid phone number format. Must start with 7, 8, or 9 and be 10 digits.');
                return;
            }
            let users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.some(u => u.phone === phone)) {
                alert('This phone number is already registered.');
                return;
            }
            users.push({ phone, password });
            localStorage.setItem('users', JSON.stringify(users));
            alert('Registration successful! Please login.');
            window.location.href = 'login.html';
        };
    </script>
</body>
</html>

